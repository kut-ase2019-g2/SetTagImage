<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="../jspsych.js"></script>
    <script src="../plugins/jspsych-html-keyboard-response.js"></script>
    <script src="../plugins/jspsych-image-keyboard-response.js"></script>
    <script type="text/javascript" src="img.php"></script>
    <link rel="stylesheet" href="../css/jspsych.css"></link>
  </head>
  <body></body>
  <script>

  var img = 'img/blue.png'; //= <?php echo $file; ?>;

    /* --------------------最初の画面-------------------- */
    var welcome_block = {
      type: "html-keyboard-response",
      stimulus: "実験にご参加いただきありがとうございます。実験を開始するにはいずれかのキーを押して下さい。"
    };

    /* --------------------課題の説明-------------------- */
    var instructions = {
      type: "html-keyboard-response",
      stimulus: "<p>この実験では、画面の中央に色のついた円が呈示されます。</p>" +
          "<p>もし円の色が<strong>青</strong>だったら、できるだけ早く「Fキー」を押して下さい。</p>" +
          "<p>もし円の色が<strong>オレンジ</strong>だったら、どのキーも押さないで下さい。</p>" +

          "<div style='width: 700px;'>"+
          "<div style='float: left;'><img src='img/blue.png'></img>" +
          "<p class='small'><strong>Fキーを押して下さい。</strong></p></div>" +
          "<div class='float: right;'><img src='img/orange.png'></img>" +
          "<p class='small'><strong>Jキーを押して下さい。</strong></p></div>" +
          "</div>"+

          "<p>実験を開始するにはいずれかのキーを押して下さい。</p>",
      timing_post_trial: 2000           //2000ms後に課題が始める
    };

    /* --------------------課題-------------------- */
    /* タグの種類を指定 */
    var tag = ['キラキラ', 'ハート', '音符', '炎', '集中線', '波紋', '電撃', 'レンズフレア', '漫画風', '振動', 'コントラスト上げる', '拡大', '縮小'];
    /* 読み込む画像を指定 */
    var test_stimuli = [
      { stimulus: "img/blue.png"},
      { stimulus: "img/orange.png"}
    ];

    /* 注視点「＋」を表示する */
    var fixation = {
      type: 'html-keyboard-response',                      // プラグインを指定する
      stimulus: '<div style="font-size:60px;">+</div>',    // 表示する刺激を指定する
      choices: jsPsych.NO_KEYS,                            // キーボード入力に対応しない
      trial_duration: 500,                                 // 500msで次の画面に切り替わる
    }
    /* 課題を表示する */
/*
    var test = {
      type: "image-keyboard-response",                     // プラグインを指定する
      stimulus: jsPsych.timelineVariable('stimulus'),      // 表示する刺激を指定する
      choices: ['f', 'j'],                                 // 入力受付キーを設定する
    }
*/


    function getTag() {
      i = 7;
      return tag[i];
    }
    var test = {
      type: "html-keyboard-response",
      stimulus: "<div style='float: midle;'><img src="+img+"></img></div>" +
          "<div style='width: 750px;'>"+
          "<div style='font-size:50px;''>" +
          "<p style='float: left;'><strong>"+getTag()+"</strong></p>" +
          "<p style='float: right;'><strong>"+getTag()+"</strong></p>" +
          "</div>"+
          "</div>",
          choices: ['f', 'j'],
    }

    /* 表示する画面を指定する */
    var test_procedure = {
      timeline: [fixation, test],                          // 注視点と課題を表示する
      timeline_variables: test_stimuli                     // 課題で表示する刺激を指定する
    }









    /* --------------------メッセージ表示用の配列-------------------- */
    var timeline = [];
    timeline.push(welcome_block);          // 最初の画面
    timeline.push(instructions);           // 課題の説明
    timeline.push(test_procedure);         // 課題の表示
    //timeline.push(debrief_block);          // 最後の画面

    /* start the experiment */
    jsPsych.init({
      timeline: timeline,
    });
  </script>
</html>
